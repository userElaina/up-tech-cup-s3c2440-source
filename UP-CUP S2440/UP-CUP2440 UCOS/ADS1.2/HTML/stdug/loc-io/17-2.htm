<HTML><HEAD><TITLE>17.2 Choosing a Base Class</TITLE></HEAD>
<BODY BGCOLOR=#FFFFFF>
<A HREF="../index.htm"><IMG SRC="images/banner.gif" WIDTH=405 HEIGHT=57 ALT="Rogue Wave banner" BORDER=0></A><BR>
<A HREF="17-1.htm"><IMG SRC="images/prev.gif" WIDTH=20 HEIGHT=21 ALT="Previous file" BORDER=0></A><A HREF="index.htm"><IMG SRC="images/top.gif" WIDTH=56 HEIGHT=21 ALT="Top of Document" BORDER=O></A><A HREF="booktoc.htm"><IMG SRC="images/toc.gif" WIDTH=56 HEIGHT=21 ALT="Contents" BORDER=0></A><A HREF="tindex.htm"><IMG SRC="images/index.gif" WIDTH=56 HEIGHT=21 ALT="Index" BORDER=0></A><A HREF="17-3.htm"><IMG SRC="images/next.gif" WIDTH=19 HEIGHT=21 ALT="Next file" BORDER=0></A>
<H2>17.2 Choosing a Base Class</H2>

<A NAME="idx415"><!></A>
<P>The first question is: Which of the standard stream classes shall be the base class? The answer fully depends on the kind of addition or modification you want to make. In our case, we want to add formatting information, which depends on the stream's character type since the format string is a sequence of tiny characters. As we show later on, the format string must be expanded into a sequence of the stream's character type for use with the stream's locale. Consequently, a good choice for a base class is class <SAMP>basic_iostream &lt;charT,Traits&gt;</SAMP>, and since we want the format string to impact only output operations, the best choice is class <SAMP>basic_ostream &lt;charT,Traits&gt;</SAMP>. </P>
<P>In general, you choose a base class by looking at the kind of addition or modification you want to make and comparing it with the characteristics of the stream classes.</P>
<UL>
<LI><P>Choose <SAMP>ios_base</SAMP> if you add information and services that do not depend on the stream's character type.</P>
</LI>
<LI><P>Choose <SAMP>basic_ios&lt;charT, Traits&gt;</SAMP> if the added information does depend on the character type, or requires other information not available in <SAMP>ios_base</SAMP>, such as the stream buffer.</P>
</LI>
<LI><P>Derive from the stream classes <SAMP>basic_istream &lt;charT,Traits&gt;</SAMP>, <SAMP>basic_ostream &lt;charT,Traits&gt;</SAMP>, or <SAMP>basic_iostream &lt;charT, Traits&gt;</SAMP> if you want to add or change the input and output operations.</P>
</LI>
<LI><P>Derive from the stream classes <SAMP>basic_(i/o)fstream &lt;charT,Traits&gt;</SAMP>, or <SAMP>basic_(i/o)stringstream &lt;charT, Traits, Allocator&gt;</SAMP> if you want to add or modify behavior that is file- or string-related, such as the way a file is opened. </P>
</LI>
</UL>
<P>Derivations from <SAMP>basic_istream &lt;charT,Traits&gt;</SAMP>, <SAMP>basic_ostream &lt;charT,Traits&gt;</SAMP>, or <SAMP>basic_iostream &lt;charT, Traits&gt;</SAMP> are the most common cases, because you typically want to modify or add input and output operations. </P>
<P>If you derive from <SAMP>ios_base</SAMP> or <SAMP>basic_ios&lt;charT, Traits&gt;,</SAMP> you do not inherit any input and output operations; you do this if you really want to reimplement all of them or intend to implement a completely different kind of input or output operation, such as unformatted binary input and output.</P>
<P>Derivations from file or string streams such as <SAMP>basic_(i/o)fstream &lt;charT,Traits&gt;</SAMP> or <SAMP>basic_(i/o)stringstream &lt;charT, Traits, Allocator&gt;</SAMP> are equally rare, because they make sense only if file- or string-related data or services must be added or modified.</P>
<BLOCKQUOTE><HR>
<B>NOTE: Choose basic_istream &lt;charT,Traits&gt;, basic_ostream &lt;charT,Traits&gt;, or basic_iostream &lt;charT, Traits&gt; as a base class when deriving new stream classes, unless you have good reason not to do so.
</B><HR></BLOCKQUOTE>

<HR>
<A HREF="17-1.htm"><IMG SRC="images/prev.gif" WIDTH=20 HEIGHT=21 ALT="Previous file" BORDER=0></A><A HREF="index.htm"><IMG SRC="images/top.gif" WIDTH=56 HEIGHT=21 ALT="Top of Document" BORDER=O></A><A HREF="booktoc.htm"><IMG SRC="images/toc.gif" WIDTH=56 HEIGHT=21 ALT="Contents" BORDER=0></A><A HREF="tindex.htm"><IMG SRC="images/index.gif" WIDTH=56 HEIGHT=21 ALT="Index" BORDER=0></A><A HREF="17-3.htm"><IMG SRC="images/next.gif" WIDTH=19 HEIGHT=21 ALT="Next file" BORDER=0></A><P>OEM Edition, &copy;Copyright 1999, Rogue Wave Software, Inc.<BR><A HREF="contact.htm">Contact</A> Rogue Wave about documentation or support issues.</P>
</BODY></HTML>
